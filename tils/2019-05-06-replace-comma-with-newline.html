<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Replace commas with newlines</title>
        <link rel="stylesheet" href="../css/brooklyn.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Ryan Butler</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Posts</a>
                <a href="../tils.html">TILs</a>
            </nav>
        </header>

        <main role="main">
            <h1>Replace commas with newlines</h1>
            <article>
    <section class="header">
        Posted on May  6, 2019
        
    </section>
    <section>
        <p>During data mangling, I often want to take a list of IDs from one query and use it as a filter in another. Sometimes I cannot do this in a join, like when I am going across distinct databases.</p>
<p>There are three quick ways to get the data in the format I want</p>
<p>Say I have a file <code>test</code> that looks like:</p>
<pre><code>3634371
5049801
4452738</code></pre>
<h3 id="sed">sed</h3>
<pre class="shell"><code>➜  rbutler ~ $ sed -i.bak -n -e 'H;${x;s/\n/, /g;p;}' file
➜  rbutler ~ $ cat file
, 3634371, 5049801, 4452738</code></pre>
<p>This performs an in-place replace, but leaves a leading <code>,</code>.</p>
<h3 id="awk">awk</h3>
<pre class="shell"><code>➜  rbutler ~ $ awk -v ORS=',' '1' file
3634371,5049801,4452738,%</code></pre>
<p>This does not replace inline, but leaves a trailing <code>,</code>.</p>
<h3 id="tr">tr</h3>
<pre class="sheill"><code>➜  rbutler ~ $ tr '\n' ,  &lt; file
3634371,5049801,4452738,%</code></pre>
<p>By far the easiest solution, but continues to leave a trailing <code>,</code>.</p>
<p>The trailing <code>,</code> can be removed by reversing the string and using the <code>cut</code> command</p>
<pre class="sheill"><code>➜  rbutler ~ $ tr '\n' ,  &lt; file | rev | cut -c 2- | rev
3634371,5049801,4452738</code></pre>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
